# PlenOctree Data Setup Guide
- Official Repository: https://github.com/sxyu/plenoctree
- Prepped Data
  - https://drive.google.com/drive/folders/1BPA51_wKRf4IfFY3YHJLomXAV66r1QVZ?usp=sharing

## 1. Verify Your Dataset Structure
- dataset contains
```bash
/Mip-NeRF360_treehill/
│── poses_bounds.npy   # Stores camera poses & scene bounds (Generated by COLMAP)
│── /images/           # Full-resolution images
│── /images_2/         # Downsampled images (2x)
│── /images_4/         # Downsampled images (4x)
│── /images_8/         # Downsampled images (8x)
│── /sparse/           # COLMAP sparse reconstruction
```
### Prerequisites
- Install [Miniconda](https://docs.conda.io/en/latest/miniconda.html)
- Create conda environemnt

- Install required dependencies
```sh
pip install numpy json5 imageio tqdm
```

## 2. Setup COLMAP
### A. Install Dependencies (If Not Installed)
- Make sure you're in your activated Conda environment (mipnerf360):
```sh
conda activate mipnerf360
```
- Then install required Python libraries
```sh
pip install numpy json5 imageio tqdm
```
- Verify CUDA and CUDNN installation
```sh
nvcc --version
where cudnn64_9.dll
```
- Install PyTorch with CUDA support
```sh
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```
- Verify PyTorch Installation
```sh
import torch
print(torch.cuda.is_available())  # Should return True
print(torch.__version__)  # Should show version 2.x.x+cu118
```
### B. Install COLMAP (Structure-from-Motion)
- Step 1: Download & Install COLMAP
  - Download COLMAP for Windows from COLMAP GitHub Releases.
  - Install it to C:\Program Files\COLMAP\.
- Step 2: Add COLMAP to System PATH
### C. Set Up COLMAP for NeRF
- Step 1: Create COLMAP Workspace
  - navigate to your dataset folder
```sh
cd /d "C:\Users\YourDataDirectory"
```
- Step 2: Run COLMAP for Sparse Reconstruction
Run these step by step
1. Extract Features (GPU)
```sh
colmap feature_extractor --database_path database.db --image_path images --SiftExtraction.use_gpu 1
```
(If GPU extraction fails, remove --SiftExtraction.use_gpu 1.)
2. Match Features (GPU)
```sh
colmap exhaustive_matcher --database_path database.db --SiftMatching.use_gpu 1
```
1. Sparse Reconstruction
```sh
colmap mapper --database_path database.db --image_path images --output_path sparse/
```
Check sparse/0/ to ensure the files cameras.txt, images.txt, and points3D.txt were created.
If .bin was created, convert .bin to .txt
1. Convert COLMAP .bin to .txt Format
```sh
colmap model_converter --input_path sparse/0 --output_path sparse/0 --output_type TXT
```
Now, sparse/0/ should contain:
```
cameras.txt
images.txt
points3D.txt
```
## 3. Convert COLMAP Output for NeRF
### A. Run COLMAP-to-NeRF Conversion
- Check if you have the file colmap2nerf.py, copy it to your data directory, Run:
```sh
cd "C:\Users\YourDataDirectory"
python colmap2nerf.py --text "C:/Users/YourDataDirectory/sparse/0" --images "C:/Users/YourDataDirectory/images" --out "C:/Users/YourDataDirectory/transforms.json"
```
